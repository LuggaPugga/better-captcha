---
title: Lit
description: Using better-captcha with Lit
icon: lit
---

## Installation

```npm
npm i @better-captcha/lit
```

## Basic Usage

```ts
import { ReCaptcha } from "@better-captcha/lit/provider/recaptcha";

// The component is automatically registered as a custom element
```

```html
<recaptcha-captcha sitekey="your-site-key"></recaptcha-captcha>
```

## Element Names

Each provider has its own custom element name:

- **Turnstile**: `<turnstile-captcha>`
- **hCaptcha**: `<hcaptcha-captcha>`
- **reCAPTCHA**: `<recaptcha-captcha>`
- **Friendly Captcha**: `<friendly-captcha>`
- **Private Captcha**: `<private-captcha-widget>`
- **Captcha Fox**: `<captcha-fox-captcha>`
- **Prosopo**: `<prosopo-captcha>`

## Imperative Handle

Lit web components expose a `getHandle()` method to access the imperative handle.

```ts
import { ReCaptcha } from "@better-captcha/lit/provider/recaptcha";

const captcha = document.querySelector('recaptcha-captcha');
const handle = captcha.getHandle();

// Execute the captcha
handle.execute();

// Reset the captcha
handle.reset();

// Get the response token
const response = handle.getResponse();
console.log(response);
```

## Callbacks

All captcha components support three lifecycle callbacks via properties and custom events:

```ts
import { ReCaptcha } from "@better-captcha/lit/provider/recaptcha";

const captcha = document.querySelector('recaptcha-captcha') as ReCaptcha;

// Set callbacks via properties
captcha.onReady = (handle) => {
  console.log("Captcha is ready", handle);
};

captcha.onSolve = (token: string) => {
  console.log("Captcha solved with token:", token);
  // Send token to your backend for verification
};

captcha.onError = (error: Error | string) => {
  console.error("Captcha error:", error);
};

// Or listen to custom events
captcha.addEventListener('ready', (e) => {
  console.log("Captcha ready", e.detail);
});

captcha.addEventListener('solve', (e) => {
  console.log("Captcha solved", e.detail.token);
});

captcha.addEventListener('error', (e) => {
  console.error("Captcha error", e.detail.error);
});
```

```html
<recaptcha-captcha sitekey="your-site-key"></recaptcha-captcha>
```

### Callback Reference

- **onReady** (property): Called when the captcha widget is successfully rendered and ready for interaction
- **onSolve** (property): Called when the captcha challenge is successfully solved with the response token
- **onError** (property): Called when an error occurs during initialization or solving
- **ready** (event): Custom event emitted when captcha is ready (event detail contains handle)
- **solve** (event): Custom event emitted when captcha is solved (event detail contains token)
- **error** (event): Custom event emitted when an error occurs (event detail contains error)

## Setting Options

You can set options via attributes or properties:

```html
<!-- Via attributes (for simple values) -->
<recaptcha-captcha sitekey="your-site-key"></recaptcha-captcha>
```

```ts
// Via properties (for complex objects)
const captcha = document.querySelector('recaptcha-captcha');
captcha.options = { theme: 'dark', size: 'compact' };
```

## Manual Rendering

By default, captchas automatically render on mount. Disable this with `autoRender="false"` and render manually using `render()`:

```html
<recaptcha-captcha sitekey="your-site-key" autoRender="false"></recaptcha-captcha>
<button onclick="showCaptcha()">Show Captcha</button>
```

```ts
const captcha = document.querySelector('recaptcha-captcha');
const handle = captcha.getHandle();

function showCaptcha() {
  handle.render();
}
```

## Common Methods

All providers implement these methods on the handle:

<AutoTypeTable path="../../packages/core/src/provider.ts" name="CaptchaHandle" />

## Available Providers

- [ReCaptcha](/docs/provider/recaptcha)
- [HCaptcha](/docs/provider/hcaptcha)
- [Turnstile](/docs/provider/turnstile)
- [Friendly Captcha](/docs/provider/friendly-captcha)
- [Private Captcha](/docs/provider/private-captcha)
- [Captcha Fox](/docs/provider/captcha-fox)
- [Prosopo](/docs/provider/prosopo)

