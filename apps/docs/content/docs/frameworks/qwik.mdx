---
title: Qwik
description: Using better-captcha with Qwik
icon: qwik
---

## Installation

```npm
npm i @better-captcha/qwik
```

## Basic Usage

```tsx
import { component$ } from "@builder.io/qwik";
import { ReCaptcha } from "@better-captcha/qwik/provider/recaptcha";

export default component$(() => {
  return <ReCaptcha sitekey="your-site-key" />;
});
```

## Imperative Handle

Qwik uses the `useCaptchaController` hook to access the imperative handle via a controller pattern.

```tsx
import { component$ } from "@builder.io/qwik";
import { useCaptchaController } from "@better-captcha/qwik";
import { ReCaptcha, type ReCaptchaHandle } from "@better-captcha/qwik/provider/recaptcha";

export default component$(() => {
  const controller = useCaptchaController<ReCaptchaHandle>();

  return (
    <>
      <ReCaptcha 
        sitekey="6LeIxAcTAAAAAJcZVRqyHh71UMIEGNQ_MXjiZKhI" 
        controller={controller}
      />
      <button onClick$={() => controller.value?.execute()}>Execute</button>
      <button onClick$={() => controller.value?.reset()}>Reset</button>
      <button onClick$={() => console.log(controller.value?.getResponse())}>Log response</button>
    </>
  );
});
```

The handle is available once the widget is ready. Use optional chaining when calling methods.

## Callbacks

All captcha components support three lifecycle callbacks via QRL props (note the `$` suffix):

```tsx
import { component$, $ } from "@builder.io/qwik";
import { useCaptchaController } from "@better-captcha/qwik";
import { ReCaptcha, type ReCaptchaHandle } from "@better-captcha/qwik/provider/recaptcha";

export default component$(() => {
  const controller = useCaptchaController<ReCaptchaHandle>();

  const handleReady$ = $((handle: ReCaptchaHandle) => {
    console.log("Captcha is ready", handle);
  });

  const handleSolve$ = $((token: string) => {
    console.log("Captcha solved with token:", token);
    // Send token to your backend for verification
  });

  const handleError$ = $((error: Error) => {
    console.error("Captcha error:", error);
  });

  return (
    <ReCaptcha
      sitekey="6LeIxAcTAAAAAJcZVRqyHh71UMIEGNQ_MXjiZKhI"
      controller={controller}
      onReady$={handleReady$}
      onSolve$={handleSolve$}
      onError$={handleError$}
    />
  );
});
```

### Callback Reference

- **onReady$**: Called when the captcha widget is successfully rendered and ready for interaction (receives handle)
- **onSolve$**: Called when the captcha challenge is successfully solved with the response token
- **onError$**: Called when an error occurs during initialization or solving

## Manual Rendering

By default, captchas automatically render on mount. Disable this with `autoRender={false}` and render manually using `render()`:

```tsx
import { component$ } from "@builder.io/qwik";
import { useCaptchaController } from "@better-captcha/qwik";
import { ReCaptcha } from "@better-captcha/qwik/provider/recaptcha";

export default component$(() => {
  const controller = useCaptchaController();

  return (
    <>
      <ReCaptcha sitekey="6LeIxAcTAAAAAJcZVRqyHh71UMIEGNQ_MXjiZKhI" controller={controller} autoRender={false} />
      <button onClick$={async () => await controller.value?.render()}>Show Captcha</button>
    </>
  );
});
```

## Common Methods

All providers implement these methods on the handle:

<AutoTypeTable path="../../packages/core/src/provider.ts" name="CaptchaHandle" />

## Available Providers

- [ReCaptcha](/docs/provider/recaptcha)
- [HCaptcha](/docs/provider/hcaptcha)
- [Turnstile](/docs/provider/turnstile)
- [Friendly Captcha](/docs/provider/friendly-captcha)
- [Private Captcha](/docs/provider/private-captcha)
- [Captcha Fox](/docs/provider/captcha-fox)
- [Prosopo](/docs/provider/prosopo)

